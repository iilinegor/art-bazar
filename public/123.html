<!DOCTYPE html>
<html>
	<head>
		<title>CMDmedia</title>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

		<style>
			html {
				width: 100vw;
				height: 100vh;
			}
			body {
				background-color: #000000;
				padding: 0px;
				overflow: hidden;
				font-family: "Arial";
			}
			.scene {
				/*perspective: 200px;*/
				text-align: center;
				margin-left: -10px;
				margin-top: -10px;
			}

			.cube {
				position: relative;
				width: 100vw;
				height: 100vh;
				transform-style: preserve-3d;
				/*animation: a 10s linear infinite;*/
				/*transform: perspective(0px) rotateY(44deg) translateZ(0px);*/
				margin: 0px;
			}

		/*	@keyframes a{
				from  {transform: rotateX(360deg) perspective(0px) }
				to  {transform: rotateX(0deg)  perspective(0px) }
			}
*/
			.rotateTop {
				transform: rotateX(270deg) perspective(0px) ;
				transition: 1s;
			}

			.rotateFront {
				transform: rotateX(0deg) perspective(0px) ;
				transition: 1s;
			}

			.rotateBottom {
				transform: rotateX(90deg) perspective(0px) ;
				transition: 1s;
			}

			.rotateBack {
				transform: rotateX(180deg) perspective(0px) ;
				transition: 1s;
			}

			.side {
				position: absolute;
				/*border: 1px dotted #rgba(250, 250, 250, 0.3);*/
				width: 100vw;
				height: 100vh;
				/*background-color: rgba(250, 150, 150, 0.9);*/
				/*background: url(https://pbs.twimg.com/media/CqzHB9MWEAA2mvi.jpg) ;*/
				background-size: cover;
				transform-origin: 50% 50% 0px;
				color: #fff;
				backface-visibility: hidden;
			}

			.back {
				background-image: url(https://habrastorage.org/files/9dc/789/712/9dc789712dd5453bad3045370841f912.jpg);
				transform: translateZ(-50vh) perspective(0px) rotateX(180deg);
			}

			.top {
				background-image: url(https://habrastorage.org/files/847/85b/967/84785b967e124e63825f9833a5a4a306.jpg);
				transform: translateY(-50vh) perspective(0px) rotateX(90deg);
			}

			.bottom {
				background-image: url(https://habrastorage.org/files/fd3/8b1/046/fd38b104675b415a841c39f4c037adc2.jpg);
				transform: translateY(50vh) perspective(0px) rotateX(-90deg);
			}

			.front {
				/*background-image: url(https://habrastorage.org/files/6c3/599/9ac/6c35999ac4244fc684431fdb212b31ef.jpg);*/
				transform: translateZ(50vh) perspective(0px);
				filter: blur(10px); 
			}




			.side_text {
				position: absolute;
				border: 1px dotted rgba(250, 250, 250, 0.4);
				width: 100vw;
				height: 100vh;
				background-color: rgba(150, 150, 250, 0.15);
				transform-origin: 50% 50% 0px;
				color: #fff;
				backface-visibility: hidden;
			}

			.back_text {
				transform: translateZ(-60vh) perspective(0px) rotateX(180deg);
			}

			.top_text {
				transform: translateY(-60vh) perspective(0px) rotateX(90deg);
			}

			.bottom_text {
				transform: translateY(60vh) perspective(0px) rotateX(-90deg);
			}

			.front_text {
				transform: translateZ(60vh) perspective(0px);
			}

			.container { 
				margin: 30vh auto;
			}

			.top_text img {
				margin: 20px;
			}

			.top_text .labels {
				width: 100%;
				display: inline-block;
				font-weight: bolder;
			}

			.top_text .labels div {
				display: inline-block;
				width: 150px;
				margin: 20px ;
			}

			.bg {
				background-image: url(https://habrastorage.org/files/e46/968/fb2/e46968fb25ff41abbd3cc64507383752.jpg);
				width: 100vw;
				height: 100vh;				
				background-size: cover;
				position: absolute;
			    left: -5px;
			    top: -5px;
				-webkit-filter: blur(10px);
				-moz-filter: blur(10px);
				-o-filter: blur(10px);
				-ms-filter: blur(10px);
				filter: blur(10px);
			}

			@keyframes bl{
				from  {-webkit-filter: blur(10px);
						-moz-filter: blur(10px);
						-o-filter: blur(10px);
						-ms-filter: blur(10px);
						filter: blur(10px); }
				to  {-webkit-filter: blur(0px);
						-moz-filter: blur(0px);
						-o-filter: blur(0px);
						-ms-filter: blur(0px);
						filter: blur(0px);}
			}

			.menu { 
				position: absolute;
				z-index: 1;
				left: 43%;
				font-size: 30px;
			}

			.menu_item {
				color: #FFFFFF;
				display: inline-block;
				margin: 10px;
			}

		</style>
	</head>
	<body>

		<div class="scene">
			<!-- <img src="https://habrastorage.org/files/558/81b/1a1/55881b1a111446ce8325a12377af4f36.png" class="bg"/> -->
			<div class="bg"> </div>
			<div class="menu">
				<div class="menu_item" onclick="goTo(0)">1</div>
				<div class="menu_item" onclick="goTo(3)">2</div>
				<div class="menu_item" onclick="goTo(2)">3</div>
				<div class="menu_item" onclick="goTo(1)">4</div>
			</div>
			<div class="cube">
				<div class="side front"> </div>
				<div class="side top"> </div>
				<div class="side back"> </div>
				<div class="side bottom"> </div>

				<div class="side_text front_text">
					<div class="bg_front"></div>

					<div class="container">
						<h1 style="font-size: 120px; font-family: 'Tahoma'; text-shadow: 10px 10px 10px rgba(0, 0, 0, 0.3);">CMDmedia</h1>
						<h2>Разработка Web-приложений любой сложности</h2>
					</div>
				</div>
				<div class="side_text back_text">
					<div class="container">
						<h1>Вверх</h1>
						<b>Мы сосредоточили свое внимание на инновациях.<br>
								Совершенные технологии и международный опыт позволяют нам задавать новые стандарты в строительстве.</b>
					</div>
				</div>
				<div class="side_text top_text">
					<div class="container">
						<h1>Зад</h1>
						<!-- <img src="http://portfolio.systemotechnika.kz/03/images/img0005.png" class="bg">
						<img src="http://portfolio.systemotechnika.kz/03/images/img0005.png" class="bg_arge"> -->
						<div class="labels">
							<div>Индивидуальный <br> подход</div>
							<div>Всегда готовы <br> обсудить</div>
							<div>Официальный <br> договор</div>
						</div>

					</div>
				</div>
				<div class="side_text bottom_text">
					<div class="container">
						<h1>Дно</h1>
						<h2>Продам гараж. Недорого.</h2>
						<h2>+79994680034</h2>
					</div>
				</div>
			</div>
		</div>

		<script >



			var pos = 0;
			var busy = true;

			$('<img/>').attr('src', 'https://habrastorage.org/files/6c3/599/9ac/6c35999ac4244fc684431fdb212b31ef.jpg').load(function() {
			   $(this).remove(); // prevent memory leaks as @benweet suggested
			   $('.front').css('background-image', 'url(https://habrastorage.org/files/6c3/599/9ac/6c35999ac4244fc684431fdb212b31ef.jpg)');
			   $('.front').css('animation', 'bl 1s');
			   console.log("done!");
			   busy = false;
			});

			function goTo( num ) {
				pos = num;
				rotate(num);
			}

			function rotate( pos ) {
				switch (pos) {
					case 0:
						$('.cube').addClass( "rotateFront" );
						$('.cube').removeClass( "rotateBottom rotateTop rotateBack " );
					break;

					case 1:
						$('.cube').addClass( "rotateTop" );
						$('.cube').removeClass( "rotateBottom rotateBack rotateFront" );
					break;

					case 2:
						$('.cube').addClass( "rotateBack" );
						$('.cube').removeClass( "rotateBottom rotateTop  rotateFront" );
					break;

					case 3:
						$('.cube').addClass( "rotateBottom" );
						$('.cube').removeClass( " rotateTop rotateBack rotateFront" );
					break;

				};
			};







			addEventListener("keydown", function(event) {
				    if (busy)
						return;
					busy = true;
					setTimeout(function(){
					if ((event.keyCode === 38) || (event.keyCode === 33)) {
					    console.log('Scroll up');
					    pos = (pos === 3) ? 0 : (pos + 1);
					};

					if ((event.keyCode === 40) || (event.keyCode === 34))  {
					    console.log('Scroll down');
					    pos = (pos === 0) ? 3 : (pos - 1);
					};
					console.log(pos);
					rotate(pos);
					busy = false;
				}, 100);
			  });

		  addEventListener("keyup", function(event) {
		    if (event.keyCode == 86)
		      document.body.style.background = "";
		  });





			$(document).bind('mousewheel', function(event) {
				if (busy)
					return;
				busy = true;
				setTimeout(function(){
					if (event.originalEvent.wheelDelta >= 0) {
					    console.log('Scroll up');
					    pos = (pos === 3) ? 0 : (pos + 1);
					}
					else {
					    console.log('Scroll down');
					    pos = (pos === 0) ? 3 : (pos - 1);
					}
					console.log(pos);
					rotate(pos);
					busy = false;
				}, 100);
			});













			document.addEventListener('touchstart', handleTouchStart, false);        
			document.addEventListener('touchmove', handleTouchMove, false);

			var xDown = null;                                                        
			var yDown = null;                                                        

			function handleTouchStart(evt) {                                         
			    xDown = evt.touches[0].clientX;                                      
			    yDown = evt.touches[0].clientY;                                      
			};                                                

			function handleTouchMove(evt) {
			    if ( ! xDown || ! yDown ) {
			        return;
			    }

			    var xUp = evt.touches[0].clientX;                                    
			    var yUp = evt.touches[0].clientY;

			    var xDiff = xDown - xUp;
			    var yDiff = yDown - yUp;

			    if ( Math.abs( xDiff ) > Math.abs( yDiff ) ) {/*most significant*/
			        if ( xDiff > 0 ) {
			            /* left swipe */ 
			        } else {
			            /* right swipe */
			        }                       
			    } else {
			        if ( yDiff > 0 ) {
			        	console.log('Scroll down');
					    pos = (pos === 0) ? 3 : (pos - 1);
			            
			        } else { 
			            console.log('Scroll up');
					    pos = (pos === 3) ? 0 : (pos + 1);
			        }                                                                 
			    }
			    /* reset values */
			    xDown = null;
			    yDown = null; 
			    rotate(pos);                                            
			};

		</script>
	</body>
</html>